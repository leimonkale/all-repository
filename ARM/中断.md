```tex
一.中断机制
	处理器应对外部突发事件的一种机制；
二.中断好处
	能够对外部突发事件马上请求，马上响应，提升硬件的实时性。
三.中断处理过程
    外设 -> GPIO -> GIC -> irq/fiq -> CPU -> 异常向量表 -> 异常处理函数:进栈  处理  出栈
    
四.中断实现(Key2为例)
	1.看原理图
		GPX1_1  EINT9
	2.看芯片手册
		1)对外设置(GPIO设置)
			GPX1CON: 0x11000C20 7:4 -> 0xf  EXT_INT41[1]  外部中断管脚
			EXT_INT41CON: 0x11000E04 6:4->0x2  触发方式:下降沿触发
			EXT_INT41_MASK: 0x11000F04 1->0    GPIO中断使能
		
		2)对内设置(中断设置) Port No:25  ID:57
			GIC:支持三种中断 (SGI PPI SPI:127:0)
			重点掌握: SPI 
		
			
			ICDISER1: 0x10490104  25->1  // 总使能
            ICDIPTR14: 0x10490838	0x01010101	//分发器 分发给cpu0
            ICDDCR: 0x10490000	0->1	  //分发使能
            ICCICR_CPU0: 0x10480000		0->1	 //CPU0接口使能
            ICCPMR_CPU0: 0x10480004		7:0->255 //优先级:0-255


            ICCIAR_CPU0: 0x1048000C 9:0->ID R  //中断应答寄存器 获取中断ID

            EXT_INT41_PEND: 0x11000F44  1->1 //清除中断标志位
            ICDICPR_CPU:  0x10490284 25->1   //清除标志位
            ICCEOIR_CPU0: 0x10480010  9:0->ID W //结束中断

	3.编程
		
irq.c:
		void exit_init(void)
		{
			//a.对外设置
			GPX1CON: 0x11000C20 7:4 -> 0xf  EXT_INT41[1]  外部中断管脚
			EXT_INT41CON: 0x11000E04 6:4->0x2  触发方式:下降沿触发
			EXT_INT41_MASK: 0x11000F04 1->0    GPIO中断使能
		
			//b.对内设置
			ICDISER1: 0x10490104  25->1  // 总使能
            ICDIPTR14: 0x10490838	0x01010101	//分发器 分发给cpu0
            ICDDCR: 0x10490000	0->1	  //分发使能
            ICCICR_CPU0: 0x10480000		0->1	 //CPU0接口使能
            ICCPMR_CPU0: 0x10480004		7:0->255 //优先级:0-255
		
		}
		
	
start.s:
	irq_handler:/*中断处理函数*/
		@进栈
		@处理
		@出栈
		








```

